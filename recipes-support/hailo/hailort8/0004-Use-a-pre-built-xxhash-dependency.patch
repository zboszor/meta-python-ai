From 9b7e89efc359289884a2b0e44cece9caf001c5a6 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Zolt=C3=A1n=20B=C3=B6sz=C3=B6rm=C3=A9nyi?=
 <zboszor@gmail.com>
Date: Wed, 7 Jan 2026 10:45:11 +0100
Subject: [PATCH 04/14] Use a pre-built xxhash dependency
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Zoltán Böszörményi <zboszor@gmail.com>
Upstream-Status: Inappropriate [oe specific]
---
 hailort/cmake/external/xxhash.cmake | 23 ++---------------------
 1 file changed, 2 insertions(+), 21 deletions(-)

diff --git a/hailort/cmake/external/xxhash.cmake b/hailort/cmake/external/xxhash.cmake
index 875bb19..72fc3ed 100644
--- a/hailort/cmake/external/xxhash.cmake
+++ b/hailort/cmake/external/xxhash.cmake
@@ -1,23 +1,4 @@
 cmake_minimum_required(VERSION 3.11.0)
 
-include(FetchContent)
-
-FetchContent_Declare(
-    xxhash
-    GIT_REPOSITORY https://github.com/Cyan4973/xxHash
-    GIT_TAG bbb27a5efb85b92a0486cf361a8635715a53f6ba # Version 0.8.2
-    GIT_SHALLOW TRUE
-    SOURCE_DIR ${HAILO_EXTERNAL_DIR}/xxhash-src
-    SUBBUILD_DIR ${HAILO_EXTERNAL_DIR}/xxhash-subbuild
-)
-
-# https://stackoverflow.com/questions/65527126/disable-install-for-fetchcontent
-FetchContent_GetProperties(xxhash)
-if(NOT xxhash_POPULATED)
-    FetchContent_Populate(xxhash)
-    if (NOT HAILO_EXTERNALS_EXCLUDE_TARGETS)
-        # Add xxhash as a header-only library
-        add_library(xxhash INTERFACE)
-        target_include_directories(xxhash INTERFACE ${xxhash_SOURCE_DIR})
-    endif()
-endif()
\ No newline at end of file
+find_package(PkgConfig REQUIRED)
+pkg_search_module(xxhash REQUIRED libxxhash)
-- 
2.52.0

